@model ERManager.ViewModels.Sales.SaleDashboardViewModel

<div class="container-fluid">
    <div class="row">

        <div class="col-xl-9">

            <div class="row w-full container">
                <div class="col-md-4 mb-4">
                    <div class="card border-secondary shadow-sm" style="background-color: rgb(255, 245, 220);">
                    <div class="card-header bg-transparent" >
                        <h4 class="header-title  mb-0">فڕۆشی ئەمڕۆ</h4>
                        <p class="mb-0">@DateTime.Now.ToLongDateString()</p>
                    </div>
                    <div class="card-body">
                        <h2 class="font-weight-light">@Model.ToDayTotalPurchase.ToString("N0")</h2>
                         
                    </div>
                </div> <!-- end card -->
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card border-secondary shadow-sm" style="background-color: rgb(220, 255, 220);">
                        <div class="card-header " style="background-color: rgb(220, 255, 220);">
                        <h4 class="header-title mb-0">پارەوەرگرتنی ئەمڕۆ</h4>
                        <p class="mb-0">@DateTime.Now.ToLongDateString()</p>
                    </div>
                    <div class="card-body">
                        <h2 class="font-weight-light">@Model.ToDayTotalPay.ToString("N0")</h2>
                        
                    </div>
                </div> <!-- end card -->
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">
                    <h4 class="header-title mb-0">جالاکی ئەمڕۆ</h4>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0" >
                        <thead>
                            <tr>
                                <th class="border-top-0">کۆد</th>
                                <th class="border-top-0">بازرگان</th>
                                <th class="border-top-0">کۆی پسوولە</th>
                                <th class="border-top-0">بەروار</th>
                                <th class="border-top-0">بەکارهێنەر</th>
                            </tr>
                        </thead> 
                        <tbody>
                            @foreach (var item in Model.Last20Sales)
                            {
                                <tr>
                                    <td>@item.Id</td>
                                    <td> <a asp-action="ContactBalance" asp-controller="Contacts" asp-route-startDate="@DateTime.Now.Date.ToString("yyyy-MM-dd")" asp-route-endDate="@DateTime.Now.Date.AddMonths(1).ToString("yyyy-MM-dd")" asp-route-contactId="@item.Contact?.Id">@item.Contact?.Name</a></td>
                                    <td>@item.InvoiceTotal</td>
                                    <td>@item.CreatedAt</td>
                                    <td>@item.User?.UserName</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div> <!-- end table-responsive -->
            </div> <!-- end card-->

            <div class="card mb-3">
                <div class="card-header">
                    <h4 class="header-title mb-0">کۆتا پارە وەرگرتب</h4>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0" >
                        <thead>
                            <tr>
                                <th class="border-top-0">کۆد</th>
                                <th class="border-top-0">بازرگان</th>
                                <th class="border-top-0">بڕ</th>
                                <th class="border-top-0">بەروار</th>
                                <th class="border-top-0">بەکارهێنەر</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Last20ContactPayments)
                            {
                                <tr>
                                    <td>@item.Id</td>
                                    <td> <a asp-action="ContactBalance" asp-controller="Contacts" asp-route-startDate="@DateTime.Now.Date.ToString("yyyy-MM-dd")" asp-route-endDate="@DateTime.Now.Date.AddMonths(1).ToString("yyyy-MM-dd")" asp-route-contactId="@item.Contact?.Id">@item.Contact?.Name</a></td>
                                    <td>@item.Amount.ToString("N2")</td>
                                    <td>@item.CreatedAt.ToShortDateString()</td>
                                    <td>@item.User?.UserName</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div> <!-- end table-responsive -->
            </div> <!-- end card -->
        </div> <!-- end col -->

        <div class="col-xl-3">
        

            <div class="card mb-3">
                <div class="card-header">
                    <h4 class="header-title mb-0">کۆی قەرز</h4>
                </div>
                <div class="card-body">
                    <h2 class="font-weight-normal mb-2">@Model.TotalCustomerDebit.ToString("N0") <i class="mdi mdi-arrow-up text-success"></i></h2>
                    <p class="text-muted">@DateTime.Now.ToLongDateString()</p>
                    <br />
                    <div>
                        <p><i class="mdi mdi-stop-circle-outline text-success"></i> کۆی فڕۆش <span class="float-right font-weight-normal">@Model.totalPurchase.ToString("N0")</span></p>
                        <p><i class="mdi mdi-stop-circle-outline text-danger"></i> کۆی پارەوەرگرتن <span class="float-right font-weight-normal">@Model.totalPay.ToString("N0")</span></p>
                        <p class="mb-0"><i class="mdi mdi-stop-circle-outline"></i> بڕی ماوە <span class="float-right font-weight-normal">@Model.TotalCustomerDebit.ToString("N0")</span></p>
                    </div>
                </div>
            </div> <!-- end card -->

            <div class="card mb-3">
                <div class="card-header">
                    <h4 class="header-title mb-0">زۆرترین فڕۆشتن</h4>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0" >
                        <thead>
                            <tr>
                                <th class="border-top-0">بازرگان</th>
                                <th class="border-top-0">بڕ</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Top10Suppliers)
                            {
                                <tr>
                                    <td>@item.Name</td>
                                    <td>@item.TotalPurchases.ToString("N2")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div> <!-- end table-responsive -->
            </div> <!-- end card -->
        </div> <!-- end col -->
    </div> <!-- end row -->
</div>

@section Scripts {
    <!-- Include any additional scripts for charts -->
}
